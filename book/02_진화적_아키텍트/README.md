# CHAPTER 2. 진화적 아키텍트

마이크로서비스는 수 많은 선택의 기회를 제공한다.

- 얼마나 다양한 기술을 사용해야 하는가.
- 서비스를 어떻게 나누고 통합해야 하는가.

변화의 속도가 빨라지고 아키텍처가 수용할 수 있는 환경이 더 유연해지면서 아키텍트의 역할 또한 변화하고 있다.



## 2.1 부정확한 비교

- 아키텍트는 우리가 통합된 기술적 비전을 확실히 확보하게 할 책임이 있으며, 고객이 필요로 하는 시스템을 전달하도록 돕는 이들이다.
- 아키텍트는 구축하는 시스템의 품질 수준이나 동료들의 근무 조건, 변화에 대응하는 조직의 능력에 대해 그 어떤 다른 역할보다 직접적인 영향을 줄 수 있다.
- IT 산업이 아직 성숙하지 않기 때문에 우리가 하는 일을 제대로 설명하기 위해 항상 다른 직업군을 참조해왔다.
  - 우리는 스스로 소프트웨어 엔지니어 또는 아키텍트라고 부르지만, 실제로는 엔지니어도 건축가도 아니다. 엔지니어와 건축가에게는 우리가 상상할 수 없는 엄격함과 규율이 있다.



## 2.2 아키텍트에 대한 진화적 관점

- 아키텍트의 요구 사항은 건축가가 건물을 설계하고 짓는 것보다 훨씬 더 빨리 변경되고 도구와 기술도 원하는 대로 변경할 수 있다.
- 아키텍트는 일단 고객의 손에 전해진 소프트웨어가 그대로 정체되는 일 없이 고객의 요구에 맞게 반응하고 적응해야 한다는 사실을 받아들여야 한다.
- 그러므로 처음부터 완벽한 최종 제품을 만들려하기보다는 추가 학습을 통해 적합한 시스템이 생성되고 지속해서 성장할 수 있는 프레임워크를 만드는 데 보탬이 되도록 생각을 전환해야 한다.



## 2.3 구역화

아키텍트로서의 우리는 구역 내의 일보다는 구역 사이에서 발생하는 일을 더 걱정해야 한다. -> 아키텍트가 서비스 간 통신 방법에 대해 고민하거나 시스템의 전반적인 상태를 적절히 모니터링하는 데 더 많은 시간을 할애해야 한다는 것을 의미한다.



## 2.4 원칙적인 접근법

시스템 설계상의 결정은 모두 트레이드오프와 관련된다. 의사 결정을 위해서는 성취해야 할 목표에 기반하여 일련의 원칙과 실천 사항을 정의해야 한다.



### 2.4.1 전략적 목표

- 전략적 목표에서는 회사가 어디를 향해 나아가고 있는지, 그리고 고객을 행복하게 만들기 위해 어떻게 해야 할지 언급해야 한다.
- 이때 핵심은 전략적 목표가 조직이 지향하는 바와 일치해야 한다는 것이다.

ex. 확장 가능한 비즈니스, 새로운 시장 진입 지원, 기존 시장에서의 혁신 지원



### 2.4.2 원칙

- 원칙은 더 큰 목표를 위해 해야 할 일을 정렬하는 규칙으로, 때로는 변경될 수 있다.
- 원칙의 수는 10개 미만인 것이 좋다. (사람들이 쉽게 기억할 수 있는 개수)
- 원칙이 많을수록 서로 겹치거나 모둔될 가능성이 커진다.

ex) 외부 의존성 줄이기, 우발적 복잡성 제거, 일관된 인터페이스와 데이터 플로우



### 2.4.3 실천 사항

- 실천 사항은 원칙을 실행하는 방법으로, 업무 수행을 위한 자세하고도 실직적인 지침이다.
- 이것은 대개 기술 명세적이며, 어떤 개발자든 이해할 수 있도록 충분히 구체적이어야 한다.

ex) 코딩 지침, 데이터의 통합 및 정제, 소규모 독립 서비스, 지속적인 배포



## 2.5 필수 기준

- 실천 사항에 따라 작업하고, 결정할 트레이드오프에 대해 고민할 때 찾아내야 할 해심 균형 중 하나는 시스팀이 얼마나 많은 변동성을 허용할 수 있는가 하는 점이다.
- 서비스와 서비스 간에 어떤 부분이 일정해야 하는지 식별해야 하는 비결 중 하나는 바람직하게 동작하는 서비스의 모습을 정의하는 것이다.



### 2.5.1 모니터링

- 서비스 간 경계를 넘어 시스템 상태를 일관되게 살펴볼 수 있어야 한다. 즉, 서비스 세부 상태가 아닌 시스템 전체 상태를 볼 수 있어야 한다.
- 이를 가능한 한 쉽게 실현하기 위해 모든 서비스가 자기 상태와 일반적인 모너티링 관련 지표(metrics)를 동일한 방식으로 전송할 것을 제안한다.



### 2.5.2 인터페이스

- 서비스 간 인터페이스 기술의 개수는 가능한 한 최소로 유지하는 편이 새로운 소비자(서비스)를 통합하는 데 도움이 된다.

ex) HTTP/REST를 사용한다면 동사형 vs 명사형, 리소스의 표현 방식 등을 고려해야 한다.



### 2.5.3 아키텍처 안정성

- 아키텍트는 오동작하는 하나의 서비스가 전체를 망가뜨리게 해서는 안된다.



## 2.7 기술 부채

- 아키텍트의 역할은 큰 그림을 보고 균형을 이해하는 것이다. 부채 수준과 연관성을 고찰하는 것은 중요하다.
- 조직에 따라 아키텍트가 관대한 지침을 제공하고, 팀 스스로 부채를 찾아내서 상환하는 방법을 결정할 수 있다.



## 2.11 마치며

아키텍트의 핵심 업무는 다음과 같다.

- 비전
  - 명료하게 소통되고, 시스템이 고객과 조직의 요구 사항을 충족하도록 돕는 기술 비전이 있는지 확인하라.
- 공감
  - 고객과 동료에 대한 여러분 결정의 파급력을 이해하라.
- 협업
  - 비전을 정의하고, 다듬고, 실행하기 위해 가능한 한 많은 동료와 협업하라.
- 적응성
  - 기술 비전이 고객과 조직이 요구하는 것을 반영하는지 확인하라.
- 자율성
  - 팀의 표준화와 자율성 사이에서 올바른 균형을 찾아내라.
- 거버넌스
  - 시스팀이 기술 비전에 맞게 구현되고 있는지 확인하라.